<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta property=og:title content="The Wrong Way to Use Javascript"><meta property=og:description content="I&rsquo;ve been taking a bit of a coding vacation. Before I jump back into things, I decided to do a little housekeeping and clean the cobwebs from my interwebs. Specifically, reducing the level of annoying coming out of Facebook.
Look at this nonsense right here:
Wow, what a great user experience! Having to un-check 60-odd check-boxes individually is just great. I&rsquo;m sure the team of 15 out of 1,000 Facebook engineers that built this page thought this was really clever."><meta property=og:type content=article><meta property=og:url content=https://the.fringe.ninja/2013/12/27/the-wrong-way-to-use-javascript/><meta property=article:published_time content=2013-12-27T11:06:21-08:00><meta property=article:modified_time content=2013-12-27T11:06:21-08:00><meta name=twitter:card content=summary><meta name=twitter:title content="The Wrong Way to Use Javascript"><meta name=twitter:description content="I&rsquo;ve been taking a bit of a coding vacation. Before I jump back into things, I decided to do a little housekeeping and clean the cobwebs from my interwebs. Specifically, reducing the level of annoying coming out of Facebook.
Look at this nonsense right here:
Wow, what a great user experience! Having to un-check 60-odd check-boxes individually is just great. I&rsquo;m sure the team of 15 out of 1,000 Facebook engineers that built this page thought this was really clever."><meta name=description content><link rel=canonical href=https://the.fringe.ninja/2013/12/27/the-wrong-way-to-use-javascript/><title>The Wrong Way to Use Javascript &middot; Ninja Snacks</title><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css><link href=https://the.fringe.ninja/css/style.css rel=stylesheet></head><body><nav class=white role=navigation><div class="row max-width"><div class="col s12 l10 offset-l1"><a href=# data-target=nav-mobile class="sidenav-trigger black-text"><i class=material-icons>menu</i></a><ul id=nav-mobile class=sidenav><li><a class=black-text href=/><i class="material-icons left">home</i>Home</a></li><li><a class=black-text href=/resume><i class="material-icons left">assignment</i>Resume</a></li></ul><a href=/ class="brand-logo grey-text text-darken-3">Ninja Snacks <small>- Tales from the Enterprise</small></a><div class=nav-wrapper><ul class="right hide-on-med-and-down"><li><a class=black-text href=/><i class="material-icons left">home</i>Home</a></li><li><a class=black-text href=/resume><i class="material-icons left">assignment</i>Resume</a></li></ul></div></div></div></nav><article class=max-width><header class=row><div class="col s12 m10 offset-m1 l10 offset-l1"><h1>The Wrong Way to Use Javascript</h1><address>João P. Bragança</address><time datetime=2013-12-27>Fri, 27 Dec 2013 11:06</time></div></header><section class=row><div class="col s12 m10 offset-m1 l10 offset-l1"><p>I&rsquo;ve been taking a bit of a coding vacation. Before I jump back into things, I decided to do a little housekeeping and clean the cobwebs from my interwebs. Specifically, reducing the level of annoying coming out of Facebook.</p><p>Look at this nonsense right here:</p><p><img src=http://i.imgur.com/GgSSJin.png alt title="ಠ\_ಠ Facebook sucks and so does their code. ಠ\_ಠ"></p><p>Wow, what a great user experience! Having to un-check 60-odd check-boxes <em>individually</em> is just great. I&rsquo;m sure the team of 15 out of 1,000 Facebook engineers that built this page thought this was really clever. We&rsquo;re using javascript to enhance the page! Weeeee!</p><pre><code class=language-html>&lt;form rel=&quot;async&quot; action=&quot;/ajax/settings/notifications/update_app&quot; method=&quot;post&quot; onsubmit=&quot;return window.Event &amp;amp;&amp;amp; Event.__inlineSubmit &amp;amp;&amp;amp; Event.__inlineSubmit(this,event)&quot; id=&quot;u_o_e&quot;&gt;
    &lt;input type=&quot;hidden&quot; name=&quot;fb_dtsg&quot; value=&quot;....&quot; autocomplete=&quot;off&quot;&gt;
    &lt;img class=&quot;uiLoadingIndicatorAsync img&quot; src=&quot;https://fbstatic-a.akamaihd.net/rsrc.php/v2/yb/r/GsNJNwuI-UM.gif&quot; alt=&quot;&quot; width=&quot;16&quot; height=&quot;11&quot;&gt;
    &lt;input type=&quot;checkbox&quot; name=&quot;checked&quot; checked=&quot;1&quot; id=&quot;u_o_f&quot;&gt;
    &lt;input type=&quot;hidden&quot; autocomplete=&quot;off&quot; name=&quot;id&quot; value=&quot;12345&quot;&gt;
&lt;/form&gt;
</code></pre><p>(26 Javascript resources out of 86 total to render this simple page by the way).</p><p>The javascript on this page apparently exists to allow the user to turn application feed notifications on and off individually. Can we apply REST principles and provide the user with a better experience? Yes, we can!</p><p>The REST style is a document based style. It tends to favor <em>coarse-grained</em> resources over fine-grained ones, if only for the cache-ability.</p><pre><code class=language-html>GET /user/12345/application-notifications
Accept: text/html
Authorization: ...


200 Ok
Content-Type: text/html
Cache-control: private

&lt;html&gt;
    &lt;body&gt;
        &lt;form action=&quot;/user/12345/application-notifications&quot; method=&quot;POST&quot; id=&quot;application-notifications&quot;&gt;
            &lt;!-- each value here represents an application id --&gt;
            &lt;input type=&quot;checkbox&quot; name=&quot;id&quot; value=&quot;12345&quot; checked &gt;
            &lt;input type=&quot;checkbox&quot; name=&quot;id&quot; value=&quot;67890&quot; &gt;
            
            &lt;input type=&quot;Submit&quot; value=&quot; Submit &quot; &gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><p>Admittedly, the user experience has not improved over what Facebook is currently providing us. However, there are two improvements. 1) Only one remote call to set all preferences at once. 2) A lot less complicated than putting an ajax form around each checkbox and having to wire that up.</p><p>What about the enhancement? We can (and should) use javascript here to enhance the user experience.</p><pre><code class=language-html>&lt;script type=&quot;text/javascript&quot;&gt;
    (function(document){
        var form = document.getElementById(&quot;application-notifications&quot;);
        var checkboxes = form.querySelectorAll('input[type=&quot;checkbox&quot;]');
        
        var setCheckState = function(value) {
            for (var i=0; i&lt;checkboxes.length; i++) {
                checkboxes[i].checked = value;
            }
        }
        
        // use your imagination on how to wire this up to some buttons.
    })(document);
&lt;/script&gt;
</code></pre><p>There. We just replaced a whole bunch of overly complicated ajax-y nonsense with 10 lines of javascript. And provided IMO the user with a better experience.</p></div></section><footer class=row><div class="col s12 m10 offset-m1 l10 offset-l1"><p class=article-meta><a class=btn-small href=https://the.fringe.ninja/tags/rest/>rest</a>
<a class=btn-small href=https://the.fringe.ninja/tags/ux/>ux</a>
<a class=btn-small href=https://the.fringe.ninja/tags/rant/>rant</a></p></div></footer></article><footer class="page-footer grey lighten-5"><div class="row max-width"><div class="col s12 l10 offset-l1 clear-padding"><div class=row></div></div></div><div class=footer-copyright><div class="row max-width" style=width:100%><div class="col s12 l10 offset-l1"><span class="grey-text text-darken-4"></span><div class=right></div></div></div></div></footer><script src=https://code.jquery.com/jquery-3.2.1.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js></script><script src=https://the.fringe.ninja/js/script.js></script></body></html>